/*
 * @Author: pipi
 * @Email: pisenliang@gmail.com
 * @LastEditors: pipi
 * @Date: 2019-04-02 08:55:38
 * @LastEditTime: 2019-05-08 15:19:26
 */
//浏览器是否支持
window.indexedDB||window.alert("Your browser doesn't support a stable version of IndexedDB. Such and such feature will not be available.");var indexDB=window.indexedDB.open("pipi",1);indexDB.onerror=function(a){console.log("Failure");console.log(a)};var db;indexDB.onsuccess=function(a){db=indexDB.result;console.log("Success");console.log(a)};indexDB.onupgradeneeded=function(a){db=a.target.result;db.objectStoreNames.contains("pipi")||db.createObjectStore("pipi",{keyPath:"id"})};function add(){var a=db.transaction(["pipi"],"readwrite").objectStore("pipi").add({id:2,vla:"{name:'1',emaile:'2',xx:'3'}"});a.onsuccess=function(a){console.log(a);console.log("Success")};a.onerror=function(a){console.log(a);console.log("Failure")}}function read(){var a=db.transaction(["pipi"]).objectStore("pipi").get(1);a.onerror=function(a){console.log("Failure");console.log(a)};a.onsuccess=function(b){a.result?console.log(a.result):(console.log("Failure"),console.log(b))}}function readAll(){db.transaction("pipi").objectStore("pipi").openCursor().onsuccess=function(a){(a=a.target.result)?(console.log(a),console.log("Success")):console.log("No data")}}function update(){var a=db.transaction(["pipi"],"readwrite").objectStore("pipi").put({id:1,name:"pipi",age:100,email:"pipi@gmail.com"});a.onsuccess=function(a){console.log("Success")};a.onerror=function(a){console.log("Failure")}}function remove(){db.transaction(["pipi"],"readwrite").objectStore("pipi")["delete"](1).onsuccess=function(a){console.log("Success")}};