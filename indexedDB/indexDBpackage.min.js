/*
 * @Author: pipi
 * @Email: pisenliang@gmail.com
 * @LastEditors: pipi
 * @Date: 2019-05-06 16:43:50
 * @LastEditTime: 2019-05-08 15:41:34
 */
//检测浏览器是否支持
window.indexedDB||window.alert("Your browser doesn't support a stable version of IndexedDB. Such and such feature will not be available.");var pipiIndexDB,pipidb,indexedDBpipi=function(){};indexedDBpipi.prototype.databaseOpen=function(a,c,b){pipiIndexDB=window.indexedDB.open(a,c);pipiIndexDB.onerror=function(a){console.log("Failure");console.log(a)};pipiIndexDB.onsuccess=function(a){console.log("Success");console.log(a);pipidb=pipiIndexDB.result};pipiIndexDB.onupgradeneeded=function(a){console.log("Upgrading...");console.log(a);pipidb=a.target.result;for(a=0;a<b.length;a++)pipidb.objectStoreNames.contains(b[a].name)?console.log(b[a].name+"\u8868\u540d\u91cd\u590d"):(pipidb.createObjectStore(b[a].name,{keyPath:b[a].key}),console.log(b[a].name+"\u8868\u521b\u5efa\u6210\u529f"))}};indexedDBpipi.prototype.add=function(a,c,b,d,e){a=pipidb.transaction([a],"readwrite").objectStore(a).add({name:c,val:b});a.onsuccess=d;a.onerror=e};indexedDBpipi.prototype.read=function(a,c,b,d){a=pipidb.transaction([a]).objectStore(a).get(c);a.onsuccess=b;a.onerror=d};indexedDBpipi.prototype.readAll=function(a,c,b){a=pipidb.transaction([a],"readonly").objectStore(a).openCursor();a.onsuccess=c;a.onerror=b};indexedDBpipi.prototype.update=function(a,c,b,d,e){a=pipidb.transaction([a],"readwrite").objectStore(a).put({name:c,val:b});a.onsuccess=d;a.onerror=e};indexedDBpipi.prototype.remove=function(a,c,b,d){a=pipidb.transaction([a],"readwrite").objectStore(a)["delete"](c);a.onsuccess=b;a.onerror=d};